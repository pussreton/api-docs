{
  "swagger": "2.0",
  "info": {
    "title": "message/v1/message.proto",
    "version": "version not set"
  },
  "tags": [
    {
      "name": "MessageService"
    },
    {
      "name": "UserService"
    },
    {
      "name": "AuthorizationService"
    }
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/authorizations/credential/actions/create": {
      "post": {
        "summary": "登录获取令牌",
        "operationId": "AuthorizationService_CreateCredential",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1Credential"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1CreateCredentialRequest"
            }
          }
        ],
        "tags": [
          "AuthorizationService"
        ]
      }
    },
    "/authorizations/credential/actions/refresh": {
      "post": {
        "summary": "刷新令牌",
        "operationId": "AuthorizationService_RefreshCredential",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1Credential"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1CreateCredentialRequest"
            }
          }
        ],
        "tags": [
          "AuthorizationService"
        ]
      }
    },
    "/messages": {
      "get": {
        "summary": "消息列表",
        "operationId": "MessageService_ListMessage",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1ListMessageReply"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "pageSize",
            "description": "分页：分页大小 范围10-50",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int32"
          },
          {
            "name": "page",
            "description": "分页：页数0-1000",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int32"
          }
        ],
        "tags": [
          "MessageService"
        ]
      },
      "post": {
        "summary": "使用WebSocket，本接口暂不开放\n一般HTTP形式发送消息\n流式返回使用WebSocket，地址： wss://api.ai.pussreton.cn/websocket",
        "operationId": "MessageService_CreateMessage",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1Message"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/v1CreateMessageRequest"
            }
          }
        ],
        "tags": [
          "MessageService"
        ]
      }
    },
    "/userinfo": {
      "get": {
        "summary": "获取用户信息",
        "operationId": "UserService_Get",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/v1User"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "tags": [
          "UserService"
        ]
      }
    }
  },
  "definitions": {
    "CreateCredentialRequestAPP": {
      "type": "string",
      "enum": [
        "UNKNOWN",
        "WX_MP",
        "WX_H5",
        "WX_MINI"
      ],
      "default": "UNKNOWN",
      "title": "- UNKNOWN: 未知\n - WX_MP: 微信公众号\n - WX_H5: 微信H5\n - WX_MINI: 微信小程序"
    },
    "protobufAny": {
      "type": "object",
      "properties": {
        "@type": {
          "type": "string"
        }
      },
      "additionalProperties": {}
    },
    "rpcStatus": {
      "type": "object",
      "properties": {
        "code": {
          "type": "integer",
          "format": "int32"
        },
        "message": {
          "type": "string"
        },
        "details": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/protobufAny"
          }
        }
      }
    },
    "v1CreateCredentialRequest": {
      "type": "object",
      "properties": {
        "fromApp": {
          "$ref": "#/definitions/CreateCredentialRequestAPP",
          "title": "来源：限制3"
        },
        "code": {
          "type": "string",
          "title": "临时授权码"
        },
        "promotionCode": {
          "type": "string",
          "title": "分享链接参数 推广码"
        }
      }
    },
    "v1CreateMessageRequest": {
      "type": "object",
      "title": "使用WebSocket，本接口不开放"
    },
    "v1Credential": {
      "type": "object",
      "properties": {
        "accessToken": {
          "type": "string",
          "title": "请求头中Authorization: Bearer access_token\nwebsocket连接时也同样如此，否次无法连接"
        },
        "refreshToken": {
          "type": "string",
          "title": "刷新令牌 冷启动时如果本地保存有令牌，调用刷新接口"
        }
      }
    },
    "v1ListMessageReply": {
      "type": "object",
      "properties": {
        "totalSize": {
          "type": "integer",
          "format": "int32",
          "title": "列表中与分页无关的项目总数。"
        },
        "items": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/v1Message"
          },
          "title": "项目列表"
        }
      }
    },
    "v1Message": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "format": "int64"
        },
        "createTime": {
          "type": "string",
          "title": "消息创建时间"
        },
        "prompt": {
          "type": "string",
          "title": "问题"
        },
        "content": {
          "type": "string",
          "title": "回答"
        }
      }
    },
    "v1User": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "format": "int64"
        },
        "createDate": {
          "type": "string",
          "title": "加入日期"
        },
        "nickname": {
          "type": "string",
          "title": "昵称"
        },
        "directInvite": {
          "type": "integer",
          "format": "int32",
          "title": "邀请人数"
        },
        "totalRevenue": {
          "type": "string",
          "title": "累计收入"
        },
        "totalWithdrawal": {
          "type": "string",
          "title": "累计提现"
        },
        "balance": {
          "type": "string",
          "title": "账户余额"
        },
        "quantityLeft": {
          "type": "integer",
          "format": "int32",
          "title": "剩余提问次数"
        },
        "totalUsed": {
          "type": "integer",
          "format": "int32",
          "title": "累计提问次数"
        },
        "expireDate": {
          "type": "string",
          "title": "提问有效期"
        }
      }
    }
  }
}
